<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>World Happiness Slideshow</title>
  <style>
    .slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: none;
    }

    .slide.active {
      display: block;
    }
  </style>
</head>
<body>
  <div id="container"></div>

  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script>
    let currentSlideIndex = 0;
    const slides = [
      "welcome.html",
      "scene1.html",
      "scene2.html"
    ];

    const container = d3.select("#container");

    function showSlide(index) {
      const previousSlide = container.select(".slide.active");
      const currentSlide = container.append("div")
        .attr("class", "slide")
        .attr("id", "slide" + index)
        .html('<object type="text/html" data="' + slides[index] + '" width="100%" height="100%"></object>');

      previousSlide.transition().style("opacity", 0).on("end", function() {
        previousSlide.remove();
      });

      currentSlide.style("opacity", 0).transition().style("opacity", 1);

      currentSlideIndex = index;
    }

    showSlide(currentSlideIndex);

    function nextSlide() {
      const nextIndex = (currentSlideIndex + 1) % slides.length;
      showSlide(nextIndex);
    }

    const continueButton = document.querySelector("#container");
    continueButton.addEventListener("click", nextSlide);

    document.addEventListener('keydown', function(event) {
      if (event.key === 'ArrowRight') {
        nextSlide();
      } else if (event.key === 'ArrowLeft') {
        const previousIndex = (currentSlideIndex - 1 + slides.length) % slides.length;
        showSlide(previousIndex);
      }
    });
  </script>
</body>
</html>
